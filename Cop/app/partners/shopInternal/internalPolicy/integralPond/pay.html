<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no">
    <title></title>

    <script src="../../../../../bower_components/jquery/dist/jquery.min.js"></script>


    <!--<link rel="stylesheet" type="text/css" href="http://pay.ucuxin.com/paytest/css/pay.css">-->
    <!--<link rel="stylesheet" type="text/css" href="http://pay.ucuxin.com/paytest/css/loaders.css">-->
    <!--<script type="text/javascript" src="http://pay.ucuxin.com/paytest/js/pay.js"></script>-->
    <!--<script type="text/javascript" src="http://pay.ucuxin.com/paytest/js/config.js"></script>-->
    <!--<script type="text/javascript" src="http://pay.ucuxin.com/paytest/js/api.js"></script>-->


    <link rel="stylesheet" type="text/css" href="http://pay.ucuxin.com/pay/css/pay.css">
    <link rel="stylesheet" type="text/css" href="http://pay.ucuxin.com/pay/css/loaders.css">
    <script type="text/javascript" src="http://pay.ucuxin.com/pay/js/pay.js"></script>
    <script type="text/javascript" src="http://pay.ucuxin.com/pay/js/config.js"></script>
    <script type="text/javascript" src="http://pay.ucuxin.com/pay/js/api.js"></script>


    <link rel="stylesheet" href="../../../../../bower_components/bootstrap/dist/css/bootstrap.css">
    <script src="../../../../public/configure/urlConfig.js"></script>
</head>
<style>
    body{margin:0}a:active,a:hover{outline:0}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}img{vertical-align:middle;border:0}@-ms-viewport{width:device-width}html{font-size:312.5%;-webkit-tap-highlight-color:transparent;height:100%;min-width:320px;overflow-x:hidden}body{font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-size:.28em;line-height:1;color:#333;background-color:#F0EFED}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-weight:500;line-height:1.2;line-height:1.1}h1 small,h1 .small,h2 small,h2 .small,h3 small,h3 .small,h4 small,h4 .small,h5 small,h5 .small,h6 small,h6 .small,.h1 small,.h1 .small,.h2 small,.h2 .small,.h3 small,.h3 .small,.h4 small,.h4 .small,.h5 small,.h5 .small,.h6 small,.h6 .small{font-weight:400;line-height:1}h1,.h1,h2,.h2,h3,.h3{margin-top:.28rem;margin-bottom:.14rem}h1 small,h1 .small,.h1 small,.h1 .small,h2 small,h2 .small,.h2 small,.h2 .small,h3 small,h3 .small,.h3 small,.h3 .small{font-size:65%}h4,.h4,h5,.h5,h6,.h6{margin-top:.14rem;margin-bottom:.14rem}h4 small,h4 .small,.h4 small,.h4 .small,h5 small,h5 .small,.h5 small,.h5 .small,h6 small,h6 .small,.h6 small,.h6 .small{font-size:75%}h1,.h1{font-size:.364rem}h2,.h2{font-size:.2996rem}h3,.h3{font-size:.238rem}h4,.h4{font-size:.175rem}h5,.h5{font-size:.14rem}h6,.h6{font-size:.119rem}h6{margin-top:0;margin-bottom:0}input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#2BB2A3;text-decoration:none;outline:0}a:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}ul{margin:0;padding:0;list-style-type:none}hr{margin-top:.28rem;margin-bottom:.28rem;border:0;border-top:1px solid #DDD8CE}p,h6{line-height:1.41;text-align:justify;margin:-.2em 0;word-break:break-all}small{color:#666}{display:inline-block width:.12rem}.imgbox img{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%)}input.mt[type=radio],input.mt[type=checkbox]{-webkit-appearance:none;width:.45rem;height:.45rem;margin:-.07rem 0;border-radius:50%;border:.02rem solid #DDD8CE;text-align:center;vertical-align:middle;line-height:.45rem;outline:0}input.mt[type=checkbox]{border-radius:.06rem}label.mt{margin-right:.16rem;vertical-align:middle;font-size:.3rem}input.mt[type=radio]:checked,input.mt[type=checkbox]:checked{background-color:#2BB2A3;border:0;color:#FFF}input.mt[type=radio]:checked:after,input.mt[type=checkbox]:checked:after{content:"✓";font-size:.4rem;font-family:base_icon}.mt[disabled=disabled]{background:#EEE;border-color:#CCC;color:#CCC}.stepper input{outline:0}.stepper .btn{width:.6rem;padding:0;outline:0;font-size:.5rem;line-height:.6rem;font-weight:lighter;font-family:CourierNewPSMT, "Times New Roman"}.stepper .btn.minus{font-family:CourierNewPSMT, Verdana}.automove .page{-webkit-transition:-webkit-transform .2s}.albumContainer .page img{display:block}.albumContainer .page-number-container{z-index:2;position:absolute;color:#FFF;font-size:.4rem;left:0;top:0;text-align:center;width:100%;margin-top:.3rem}.albumContainer .page-number{padding:.2rem;background:rgba(0, 0, 0, .5)}button:focus{outline:0}.btn{display:inline-block;margin:20px 0 0;text-align:center;height:.6rem;padding:0 .32rem;border-radius:.06rem;color:#FFF;border:0;background-color:#FE6000;font-size:.28rem;vertical-align:middle;line-height:.6rem;box-sizing:border-box;cursor:pointer;-webkit-user-select:none}.btn-block{display:block;width:100%}.btn-larger{height:.94rem;line-height:.94rem;font-size:.4rem}.wrapper{overflow:hidden;padding:0 .2rem}.wrapper h4{font-size:.3rem}.wrapper-list h4{margin:.6rem .2rem .2rem;font-size:.34rem;font-weight:400}.weapper-list h4:first-of-type{margin-top:.3rem}.box-btn a{padding:.2rem}dl.list{border-top:1px solid #DDD8CE;border-bottom:1px solid #DDD8CE;margin-top:.2rem;margin-bottom:0;background-color:#FFF}dl.list dt,dl.list dd{margin:0;border-bottom:1px solid #DDD8CE;overflow:hidden;font-size:inherit;font-weight:400;position:relative}dl.list dt:last-child,dl.list dd:last-of-type{border-bottom:0}dl.list .dd-padding,dl.list dt,dl.list dd > .react{padding:.28rem .2rem}dl.list dt{font-size:.34rem;padding-bottom:.2rem;color:#333}dl.list .db{height:.88rem;line-height:.88rem;font-size:.3rem}dl.list dd dl{margin:0;margin-bottom:-1px;padding-left:.2rem;border:0}dl.list dd dl > .dd-padding,dl.list dd dl dd > .react,dl.list dd dl > dt{padding-left:0}dl.list .db > .react{color:#2BB2A3;padding:0 .2rem}dl.list-in{margin:0;border-top:0}dl.list:first-child{margin:0;border-top:0}dl.list dd > .input-weak{width:100%;display:block}dl.list dd > .btn{margin-top:-.15rem;margin-bottom:-.15rem}.kv-line > h6,.kv-line > .kv-k{display:block;width:5em;font-size:inherit;font-weight:400}.kv-line > .kv-v,.kv-line > p{display:block;-webkit-box-flex:1;-moz-box-flex:1;-ms-flex:1}.kv-line-r{display:-webkit-box;display:-ms-flexbox;margin:.2rem 0}.kv-line-r > h6,.kv-line-r > .kv-k{-webkit-box-flex:1;-moz-box-flex:1;-ms-flex:1;font-size:inherit;font-weight:400;margin-right:.2rem;display:block}.kv-line-r > .kv-v,.kv-line-r > p{display:block}ul.tab-strong{border-color:#2BB2A3;color:#2BB2A3}.tab-strong li{border-right-color:#2BB2A3}.tab-strong li.active{background:#2BB2A3}.taba li{display:block;text-align:center;-webkit-box-flex:1;-ms-flex:1;position:relative}.taba.noslide li.active:after{content:''}.taba li.active:after{content:"";display:block;position:absolute;bottom:-.08rem;border-bottom:.08rem solid #2BB2A3;width:100%}.taba li a.react{padding-top:.28rem;padding-bottom:.2rem}.taba.noslide li.active:after{content:none}.navbar{height:1.01rem;color:#FFF;background:#FE6000;display:-webkit-box;display:-ms-flexbox;position:relative}.navbar h1.nav-header{-webkit-box-flex:1;-ms-flex:1;font-size:.36rem;font-weight:lighter;text-align:center;line-height:1rem;margin:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}
    .choicePay{
        float: left;
        width: 120px;
        border-radius: 10px;
        height: 45px;
        background-color: #122b40;
        color: whitesmoke;
        margin-left: -200px;
        position: absolute;
        left: 50%;
        margin-top: 40px;
        text-align: center;
        line-height: 45px;
        cursor: pointer;
    }
    .choicePay2{
        margin-left: -20px;
    }
    .choicePay3{
        margin-left: 160px;
    }

    .form-control {
        display: block;
        width: 100%;
        height: 34px;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
        -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
        -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
        transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    }
    .form-control:focus {
        border-color: #66afe9;
        outline: 0;
        -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, .6);
        box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, .6);
    }
    .form-control::-moz-placeholder {
        color: #999;
        opacity: 1;
    }
    .form-control:-ms-input-placeholder {
        color: #999;
    }
    .form-control::-webkit-input-placeholder {
        color: #999;
    }
    .form-control[disabled],
    .form-control[readonly],
    fieldset[disabled] .form-control {
        cursor: not-allowed;
        background-color: #eee;
        opacity: 1;
    }
    textarea.form-control {
        height: auto;
    }
</style>
<body id="order-check" data-com="pagecommon">
<!--<div class="">-->
<!--<button id="pay" onclick="payMethode()">点击</button>-->
<!--</div>-->

<div class="wrapper-list">
    <h4>购买积分</h4>
    <dl class="list">
        <dd>
            <dl>
                <dd class="kv-line-r dd-padding">
                    <h6>金额：</h6>
                    <p><input type="form-control" id="money"  style="border:1px solid #ff0000; display: inline; width:auto;" class="form-control" />元</p>
                </dd>
                <dd class="kv-line-r dd-padding">
                    <h6>积分：</h6>
                    <p id="shopInternal"></p>
                </dd>
                <dd class="kv-line-r dd-padding">
                    <h6>描述：</h6>
                    <p  >
                           <textarea class="form-control"
                                          id="desc"
                                     style="width:420px;height:68px;resize: none;"></textarea>
                    </p>
                </dd>
            </dl>
        </dd>
    </dl>
    <div id="pay-methods-panel" class="pay-methods-panel">
        <form id="pay_form" method="POST"  action="https://mapi.alipay.com/gateway.do">
            <input type="hidden" name="sign" value="IvjVp0/XaRmVmE8Csio+TpbjuTzAzd4PrQLMUR8V82OcGhrjy+WLtaDD7KFn0tnMXfpLIJyKRjmxNulXNTMVWknKB4S77TRiBVHVOzeECKfh4BUY+Uyesw6vXjtbIq2cL6GUI1A8OHu2HCjlNJK1Ks3VQqMTY7cowe8DX8PETq0="/>
            <input type="hidden" name="_input_charset" value="utf-8"/>
            <input type="hidden" name="subject" value="test"/>
            <input type="hidden" name="total_fee" value="0.01"/>
            <input type="hidden" name="sign_type" value="RSA"/>
            <input type="hidden" name="service" value="alipay.wap.create.direct.pay.by.user"/>
            <input type="hidden" name="notify_url" value="http://www.testalipay.com/alipay.wap.create.direct.pay.by.user-JAVA-UTF-8/notify_url.jsp"/>
            <input type="hidden" name="partner" value="2088501624560335"/>
            <input type="hidden" name="seller_id" value="2088501624560335"/>
            <input type="hidden" name="out_trade_no" value="2016330134443814"/>
            <input type="hidden" name="payment_type" value="1"/>
            <input type="hidden" name="return_url" value="http://www.testalipay.com/alipay.wap.create.direct.pay.by.user-JAVA-UTF-8/return_url.jsp"/>
            <div class="choicePay" rel="1">支付宝支付</div>
            <div class="choicePay choicePay2" rel="7">银联支付</div>
            <!--<div class="choicePay choicePay3" rel="11">微信支付</div>-->
        </form>
    </div>
</div>
<script>

    $('.choicePay').click(function () {

        var ua = navigator.userAgent.toLowerCase();//浏览器内核
        var type = '';
        var time = Math.round(new Date().getTime() / 1000);
        time = String(time);
        var rel = $(this).attr('rel');
        if(rel=='1'){
            type = '1';
            createOrder(type);
        }else if(rel=='7'){
            type = '7';
            createOrder(type);
        }else if(rel=='11'){
            if (ua.indexOf('micromessenger') != -1) {
                type = '11';
                createOrder(type);
            } else {
                alert('请在微信中打开！');
            }
        }
    });


    $('#money').on('keyup',function () {
        var v=$(this).val();
        if(!isNaN(v)){
            $('#shopInternal').html(parseInt(v*100));
        }
        else{
            $('#shopInternal').html(0);
        }
    });


    function  createOrder(type) {

        var orgModel= JSON.parse(APPMODEL.Storage.getItem('copPage_orgid'));
        var AppID=207;
       var   ParterID=orgModel.OrgType;


        var parmars={

        };
        parmars.Channel=type;
        parmars.TimeStamp = Date.parse(new Date()) / 1000;
        parmars.TimeExpire = 60;
        parmars.Currency = 'cny';

        $.ajax({
             url:urlConfig + "point/v3/Web/CreatePayOrder?token="+APPMODEL.Storage.getItem('copPage_token')+'&appID=207&ts='+Math.round(new Date().getTime()/1000),
             type:'POST',
            data:{
                ID:undefined,
                AppID:AppID,
                ParterID:ParterID,
                BillNo:undefined,
                ProdID:'125490073032014565',
                ST:0,
                Amount:$('#money').val(),
                Point:$('#money').val()*100,
                PayDate:undefined,
                UID:undefined,
                Desc:$('#desc').val(),
                SignCode:undefined,
            },
            success:function (data) {
                if (data.Ret == 0) {
                    parmars.OrderNo = data.Data.BillNo;
                    parmars.AppId = 207;
                    parmars.PayProductId = data.Data.ProdID;
                    parmars.Amount = data.Data.Amount;
                    parmars.Subject = '服务费';
                    parmars.UserId = data.Data.UID;
                    parmars.Body = "福豆科技";
                    parmars.Description = data.Data.Desc;
                    parmars.Extra = "无额外参数";
                    getSign( parmars);
                }
            }

        });

    }

    /*定义参数*/

    getSign=function(pay) {
        var time = Math.round(new Date().getTime() / 1000);
        $.ajax({
            url: homeRoot + uxApi.paySign,
            type: 'post',
            data: pay,
            datatype: 'json',
            success: function (restult) {

                if (restult.Ret == 0) {
                    $('#waitePage').css('display', 'none');
                    pay.Sign = restult.Data;
                    requstPay(pay);
                } else {
                    $('#waitePage').css('display', 'none');
                    alert(restult.Msg);
                }
            }
        })
    }
</script>
</body>
</html>